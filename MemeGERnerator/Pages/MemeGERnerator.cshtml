@page
@{
    ViewData["Title"] = "MemeGERnerator";
}

<h1 class="visually-hidden">MemeGERnerator</h1>

<div class="mg-layout">
    <div class="mg-left">
        <form id="memeForm" class="mg-form">
            <div class="mb-3">
                <label for="imageInput">Kies een afbeelding:</label><br />
                <input type="file" id="imageInput" accept="image/*" class="mg-file-input" />
                <label for="imageInput" class="btn btn-primary btn-sm mg-file-btn">Bestand kiezen</label>
            </div>

            <div class="mb-3">
                <label for="imageUrl">Of plak een afbeelding-URL:</label><br />
                <input type="url" id="imageUrl" placeholder="https://example.com/afbeelding.jpg" />
                <button type="button" id="loadUrlBtn" class="btn btn-primary btn-sm">Laad URL</button>
            </div>

            <div id="dropZone" class="mg-dropzone">
                Sleep hier je afbeelding naartoe of kies een bestand hierboven
            </div>

            <div class="mb-3">
                <label for="topText">Bovenste tekst:</label><br />
                <input type="text" id="topText" placeholder="Top text" />
            </div>

            <div class="mb-3">
                <label for="bottomText">Onderste tekst:</label><br />
                <input type="text" id="bottomText" placeholder="Bottom text" />
            </div>

            <div class="mb-3">
                <label for="fileName">Bestandsnaam (zonder extensie):</label><br />
                <input type="text" id="fileName" placeholder="meme" />
                <small class="text-muted">Wordt automatisch ingevuld op basis van de bestandsnaam of URL, kan worden aangepast.</small>
            </div>

            <div class="mg-actions">
                <button type="button" class="btn btn-success btn-sm" onclick="downloadMeme()">Download Meme</button>
                <button type="button" class="btn btn-secondary btn-sm" onclick="resetMeme()">Reset Meme</button>
            </div>
        </form>
    </div>

    <div class="mg-right">
        <h2 class="mg-right-title">MemeGERnerator</h2>
        <div class="mg-canvas-wrap">
            <canvas id="memeCanvas" width="400" height="400"></canvas>
        </div>
        <div class="mg-actions-right">
            <button type="button" class="btn btn-success btn-sm" onclick="downloadMeme()">Download Meme</button>
            <button type="button" class="btn btn-secondary btn-sm" onclick="resetMeme()">Reset Meme</button>
        </div>
        <div class="mg-sliders">
            <div class="mg-slider">
                <label for="topFontSize">Lettergrootte (boven):</label>
                <input type="range" id="topFontSize" min="12" max="100" value="40" />
                <span id="topFontSizeValue">40</span> px
            </div>
            <div class="mg-slider">
                <label for="bottomFontSize">Lettergrootte (onder):</label>
                <input type="range" id="bottomFontSize" min="12" max="100" value="40" />
                <span id="bottomFontSizeValue">40</span> px
            </div>
        </div>
    </div>
</div>

<script>
    // Auto-fill fileName based on uploaded file or URL
    document.getElementById('imageInput').addEventListener('change', function() {
        var file = this.files[0];
        var fileName = file ? file.name.split('.').slice(0, -1).join('.') : '';
        document.getElementById('fileName').value = fileName;
    });

    document.getElementById('loadUrlBtn').addEventListener('click', function() {
        var url = document.getElementById('imageUrl').value;
        var fileName = url ? url.substring(url.lastIndexOf('/') + 1, url.lastIndexOf('.')) : '';
        document.getElementById('fileName').value = fileName;
    });
</script>

